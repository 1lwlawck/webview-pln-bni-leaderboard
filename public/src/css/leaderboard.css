:root{
  --bg1:#0f62a9; --bg2:#0b3d91; --white:#fff; --ink:#1b3555; --muted:#8a97ad;
  --gold:#ffd640; --silver:#cfd8dc; --bronze:#d9a96b;
  --r-lg:20px; --r-md:14px; --r-pill:999px;
  --fs-sm:clamp(.85rem,.8rem + .2vw,.95rem);
  --fs-base:clamp(.95rem,.9rem + .4vw,1.05rem);
  --fs-lg:clamp(1.05rem,1rem + .6vw,1.25rem);
  --fs-xl:clamp(1.25rem,1.1rem + 1vw,1.6rem);
  --gap-1:clamp(.4rem,.35rem + .3vw,.6rem);
  --gap-2:clamp(.6rem,.5rem + .6vw,1rem);
  --gap-3:clamp(.9rem,.8rem + .8vw,1.4rem);
  --winner-h:66px;
  --shine-vfade:12%;
  --podium-board-gap:14px;
  --rank-col-w:28px;
  --badge-size:34px;
  --badge-rise:18px;
  --item-max: 560px;
}

*{ box-sizing:border-box }
html,body{ height:100% }

body{
  background:linear-gradient(160deg,var(--bg1),var(--bg2));
  min-height:100dvh; color:#eaf3ff;
  font-family:system-ui,-apple-system,"Nunito Sans",Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  font-size:var(--fs-base);
  display:flex; flex-direction:column;
}

.page-wrap{
  flex:1 1 auto;
  display:flex; flex-direction:column; gap:var(--gap-2);
  padding-bottom:0;
}

.title{ font-weight:700; letter-spacing:.3px; font-size:var(--fs-xl); }

.period-pill{
  background:#fff; color:var(--ink); border-radius:var(--r-pill);
  padding:.45rem .85rem; box-shadow:0 6px 20px rgba(0,0,0,.15);
  display:inline-flex; align-items:center;
}
.period-pill select{
  border:0; background:transparent; font-weight:600;
  padding-left:.25rem; padding-right:1.2rem; font-size:var(--fs-sm);
}
.period-pill:focus-within{ outline:2px solid rgba(0,0,0,.08) }
@supports selector(:has(*)){
  .period-pill:has(select:focus){ outline:2px solid rgba(0,0,0,.08) }
}

.podium{
  position:relative; z-index:4;
  overflow:visible;
  padding-bottom:var(--podium-board-gap);
}
.podium-card{
  position:relative; overflow:visible;
  background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.18);
  border-radius:var(--r-lg); padding:var(--gap-2); text-align:center;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.20), 0 8px 24px rgba(0,0,0,.25);
  isolation:isolate; contain:layout;
}
.podium-card.primary{
  background:linear-gradient(180deg,rgba(255,255,255,.18),rgba(255,255,255,.05));
  transform:translateY(-.5rem);
}
.rank-badge{
  position:absolute;
  left:50%;
  top:calc(-0.5 * var(--badge-size) - var(--badge-rise));
  transform:translateX(-50%);
  width:var(--badge-size); height:var(--badge-size);
  border-radius:50%; display:flex; align-items:center; justify-content:center;
  background:#fff; color:#023f79; font-weight:800; font-size:var(--fs-sm);
  border:3px solid rgba(255,255,255,.6);
  box-shadow:0 8px 18px rgba(0,0,0,.25);
  z-index:12;
}
.avatar{
  width:64px; height:64px; border-radius:50%;
  background:rgba(255,255,255,.16); display:flex; align-items:center; justify-content:center;
  font-weight:800; font-size:1.05rem; margin:0 auto .6rem;
  border:1px solid rgba(255,255,255,.28); box-shadow:inset 0 1px 0 rgba(255,255,255,.25);
}
.name{ font-weight:700; line-height:1.15; font-size:var(--fs-lg) }
.score-chip{
  margin-top:.45rem; background:transparent; color:#eaf3ff;
  border:1px solid rgba(255,255,255,.40); border-radius:10px; padding:.38rem .62rem;
  font-weight:800; display:inline-block; font-size:var(--fs-sm);
  font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1,"lnum" 1;
}

.podium-card::before{
  content:""; position:absolute; inset:-2px; border-radius:inherit; pointer-events:none;
  background:
    radial-gradient(120% 80% at 50% -10%, rgba(255,255,255,.22), transparent 60%),
    radial-gradient(120% 80% at 50% 110%, rgba(255,255,255,.09), transparent 60%);
}

.glow-gold::after, .glow-silver::after, .glow-bronze::after{
  content:""; position:absolute; inset:-1px; border-radius:inherit; pointer-events:none;
}
.glow-gold::after{
  box-shadow:
    0 0 0 2px color-mix(in oklab, var(--gold) 80%, #fff 0%),
    0 0 26px 6px color-mix(in oklab, var(--gold) 35%, transparent);
}
.glow-silver::after{
  box-shadow:
    0 0 0 2px color-mix(in oklab, var(--silver) 80%, #fff 0%),
    0 0 24px 5px color-mix(in oklab, var(--silver) 30%, transparent);
}
.glow-bronze::after{
  box-shadow:
    0 0 0 2px color-mix(in oklab, var(--bronze) 80%, #fff 0%),
    0 0 24px 5px color-mix(in oklab, var(--bronze) 30%, transparent);
}

.podium-card.primary.glow-gold{
  animation:goldPulse 3.2s ease-in-out infinite;
}
@keyframes goldPulse{
  0%,100%{ filter:drop-shadow(0 0 0 rgba(255,214,64,0)) }
  50%{ filter:drop-shadow(0 0 18px rgba(255,214,64,.45)) }
}

.podium-card .shine{
  position:absolute; top:0; left:-200%;
  width:80%; height:100%;
  background:linear-gradient(120deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0) 35%,
    rgba(255,255,255,.9) 50%,
    rgba(255,255,255,0) 65%,
    rgba(255,255,255,0) 100%);
  transform:skewX(-20deg) rotate(2deg) translateZ(0);
  filter:blur(10px); opacity:.45; mix-blend-mode:screen;
  pointer-events:none; clip-path:inset(0 round var(--r-lg));
  -webkit-mask-image:linear-gradient(to bottom, transparent 0%, black var(--shine-vfade), black calc(100% - var(--shine-vfade)), transparent 100%);
  -webkit-mask-size:100% 100%; -webkit-mask-repeat:no-repeat;
  mask-image:linear-gradient(to bottom, transparent 0%, black var(--shine-vfade), black calc(100% - var(--shine-vfade)), transparent 100%);
  mask-size:100% 100%; mask-repeat:no-repeat;
  animation:sweep 3.2s cubic-bezier(.22,.61,.36,1) infinite;
  will-change:transform, opacity; z-index:0;
}
.podium-card > *:not(.shine){ position:relative; z-index:1 }

@keyframes sweep{
  0%{ left:-200%; opacity:0 }
  10%{ opacity:.9 }
  60%{ left:130%; opacity:0 }
  100%{ left:130%; opacity:0 }
}

.gold-img{
  position:absolute; left:50%; transform:translateX(-55%) translateY(15%);
  bottom:calc(-1 * var(--podium-board-gap));
  width:clamp(240px,55vw,420px); height:auto;
  z-index:1px; pointer-events:none;
  filter:drop-shadow(0 4px 8px rgba(0,0,0,.22));
}

.board-wrapper-full{
  background:var(--white); color:var(--ink);
  border-top-left-radius:50px; border-top-right-radius:50px;
  padding:10px 16px 16px;
  margin-top:0;
  margin-left:calc(-1 * var(--bs-gutter-x, .75rem));
  margin-right:calc(-1 * var(--bs-gutter-x, .75rem));
  box-shadow:0 -10px 26px rgba(0,0,0,.20);
  position:relative; z-index:5; touch-action:auto; transition:none;
  display:flex; flex-direction:column; gap:var(--gap-2);
}
.board{
  padding:0; background:transparent; box-shadow:none; border-radius:0;
  overflow-y:auto; -webkit-overflow-scrolling:touch;
  flex:1 1 auto; min-height:180px; max-height:100%;
}
.board .item{
  width: min(100%, var(--item-max)); 
  margin-inline: auto;             
  background:#fff;
  border-radius:var(--r-md);
  padding:.9rem 1rem;
  display:flex; align-items:center; justify-content:space-between;
  box-shadow:0 1px 0 rgba(18,31,64,.05);
  margin:.20rem 0;
  gap:var(--gap-1);
}}
.board .item:last-child{ margin-bottom:0 }

.board .left{ display:flex; align-items:center; gap:.75rem; min-width:0  }
.board .rank{
  color:var(--muted); font-weight:700;
  width:var(--rank-col-w); flex:0 0 var(--rank-col-w);
  text-align:start; font-size:var(--fs-sm); letter-spacing:.2px;
  font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1,"lnum" 1;
}
.board .avatar-sm{
  width:36px; height:36px; border-radius:50%; background:#e7eef9; color:#2a4370;
  display:flex; align-items:center; justify-content:center;
  font-weight:800; flex:0 0 36px; font-size:.9rem;
}
.board .who{
  font-weight:500; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size:var(--fs-sm);
}
.board .score{
  position:relative; padding-left:18px; font-weight:800; font-size:var(--fs-sm);
  font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1,"lnum" 1;
}
.board .score::before{
  content:""; position:absolute; left:0; top:50%; transform:translateY(-50%);
  width:1px; height:22px; background:rgba(27,53,85,.18);
}

.winner{
  position:fixed; left:0; right:0; bottom:0;
  height:var(--winner-h); padding:0; display:flex; align-items:center;
  background:linear-gradient(100deg,#0f5ca7,#0a4d94);
  color:#eaf3ff; border-top-left-radius:5px; border-top-right-radius:5px;
  box-shadow:0 -12px 28px rgba(0,0,0,.35);
  z-index:1; transform:translateZ(0); backface-visibility:hidden;
}
.winner-row{ height:100%; min-height:0; display:flex; align-items:center; gap:12px; padding:0 12px }
.winner-person{ display:flex; align-items:center; gap:.55rem; min-width:0 }
.winner .avatar-inline{
  width:28px; height:28px; border-radius:50%; background:rgba(255,255,255,.18);
  display:inline-flex; align-items:center; justify-content:center;
  font-size:.8rem; font-weight:800; border:1px solid rgba(255,255,255,.25);
}
.winner-name{
  font-weight:500; font-size:var(--fs-sm); white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.winner-score{
  font-weight:700; font-size:clamp(1rem,.9rem + .9vw,1.3rem); letter-spacing:.3px;
  font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1,"lnum" 1;
}
.winner .divider{ width:1px; height:28px; background:rgba(255,255,255,.28) }


.snackbar{
  position:fixed; left:50%;
  bottom:calc(var(--winner-h) + max(12px, env(safe-area-inset-bottom,0)));
  transform:translateX(-50%) translateY(30px);
  background:#1f2937; color:#fff; padding:10px 14px; border-radius:12px; font-weight:600;
  box-shadow:0 10px 24px rgba(0,0,0,.25);
  opacity:0; pointer-events:none; z-index:3000; font-size:var(--fs-sm);
  transition:opacity .35s ease-in-out, transform .35s ease-in-out;
}
.snackbar.show{ opacity:1; transform:translateX(-50%) translateY(0); pointer-events:auto }
.snackbar.success{ background:#059669 }
.snackbar.info{ background:#2563eb }
.snackbar.warn{ background:#b45309 }

.modal-bottom-sheet{ position:fixed; bottom:0; margin:0; width:100%; font-family:"Nunito Sans",sans-serif; z-index:2000 }
.modal-bottom-sheet .modal-content{ border-top-left-radius:16px; border-top-right-radius:16px; background:#fff; color:#212121 }
.period-option{
  cursor:pointer; padding:14px 18px; display:flex; justify-content:space-between; align-items:center;
  color:#424242; border-bottom:1px solid #e0e0e0; font-weight:500;
}
.period-option:last-child{ border-bottom:none }
.period-option.active{ color:#0288d1; font-weight:700 }
.period-option .checkmark{
  width:20px; height:20px; border-radius:50%; border:2px solid #0288d1;
  display:flex; align-items:center; justify-content:center;
}
.period-option.active .checkmark{ background:#0288d1; border-color:#0288d1 }
.period-option.active .checkmark::after{ content:""; width:8px; height:8px; border-radius:50%; background:#fff }

@media (max-width:480px){
  .board .item{ padding:.75rem .85rem }
  .avatar{ width:56px; height:56px }
  .podium-card .shine{ filter:blur(8px); --shine-vfade:10% }
}
@media (min-width:576px){
  .podium .col-4:nth-child(2){ order:2 }
}

@media (prefers-reduced-motion:reduce){
  *{
    animation-duration:.001ms !important;
    animation-iteration-count:1 !important;
    transition-duration:.001ms !important;
    scroll-behavior:auto !important;
  }
  .podium-card.primary.glow-gold{ animation:none !important }
  .podium-card .shine{ display:none !important }
}

.help-ico{
  display:inline-grid; place-items:center;
  width:22px; height:22px; border-radius:50%;
  border:2px solid rgba(255,255,255,.9);
  background:transparent; color:#fff; font-weight:800; font-size:12px;
  text-decoration:none; line-height:0; margin-left:.35rem;
  transition:background .12s ease, transform .12s ease;
}
.help-ico:hover{ background:rgba(255,255,255,.15) }

.title-bar{
  position:relative;
  display:flex; justify-content:center; align-items:center;
  padding-right:0;
}
.title-bar .help-ico{
  position:absolute;
  inset-inline-end:0;
  top:50%;
  transform:translateY(-50%);
}
.title-bar .help-ico:hover{ transform:translateY(calc(-50% - 1px)) }

.period-pill .chev{
  width:16px; height:16px; flex:0 0 auto; margin-left:.25rem;
  opacity:.85; transition:transform .2s ease, opacity .2s ease;
}
.period-pill:hover .chev{ opacity:1 }
.period-pill[aria-expanded="true"] .chev{ transform:rotate(180deg) }

